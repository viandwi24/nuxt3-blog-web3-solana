import{_ as w}from"./Card.9b75e3a1.js";import{b as y,e as A,Q as C,R as _,v as k,U,o as d,f as i,h as Y,i as h,u as a,F as E,l as e,V as n,W as c}from"./entry.6f81f143.js";import{a as L,d as B,u as P,b as V,g as N}from"./use-auth.433303ab.js";const W={class:""},R=e("div",{class:"font-bold text-xl"},"Create Your Profile",-1),$=e("div",{class:"text-sm font-thin"},"You must create your profile to continue",-1),q={key:1,class:"font-bold text-xl"},D={class:"flex flex-col space-y-4"},F={class:"flex"},I=e("div",{class:"w-1/5 mt-2"},"Your Wallet Address",-1),M={class:"flex-1"},S=["value"],j={class:"flex"},G=e("div",{class:"w-1/5 mt-2"},"User Address",-1),O={class:"flex-1"},Q=["value"],T=e("div",{class:"font-thin text-sm mt-1"}," * this is your user address (pda), generate automatically from seed (program seed + your wallet address) ",-1),z={class:"flex"},H=e("div",{class:"w-1/5 mt-2"},"Name",-1),J={class:"flex-1"},K={class:"flex"},X=e("div",{class:"w-1/5 mt-2"},"Email",-1),Z={class:"flex-1"},ee={class:"flex"},te=e("div",{class:"w-1/5 mt-2"},"Avatar",-1),se={class:"flex-1 flex space-x-4"},ae={class:"w-16 h-16 bg-slate-700 rounded-full overflow-hidden flex"},oe=["src"],le={class:"flex-1 flex items-center"},re={class:"flex items-center justify-end"},de={key:1,class:"bg-primary-500 rounded-lg px-4 py-2 text-white font-bold disabled:opacity-50",disabled:""},pe=y({__name:"profile",setup(ie){const f=A(),t=L();C(),B();const{program:g,BLOG_ADDRESS:x}=P(),u=V(),p=()=>{(!t.isConnected.value||!t.check())&&f.push("/")};p(),_(t.isConnected,o=>{p()});const m=k(()=>N(t.wallet.value?(t?.wallet?.value).toBuffer():Buffer.from(""))),s=U({name:t.isLogged.value&&t.user.value?.data?.name||"",email:t.isLogged.value&&t.user.value?.data?.email||"",image:t.isLogged.value?t.user.value?.data?.image||"":"https://api.dicebear.com/5.x/pixel-art/svg?seed=Example&autogenerated"});_(s,o=>{`${o.image}`.includes("autogenerated")&&(s.image="https://api.dicebear.com/5.x/pixel-art/svg?seed="+(o.name===""?"Example":o.name)+"&autogenerated")});const v=async()=>{try{if(s.name.replaceAll(" ","")==="")return alert("Name is required");if(s.email.replaceAll(" ","")==="")return alert("Email is required");if(s.image.replaceAll(" ","")==="")return alert("Image is required");u.show();const o=await g.value.methods.createUser(s.name,s.email,s.image).accounts({userAccount:m.value,blogAccount:x}).rpc();await t.check(),window.location.reload()}catch(o){console.log(o)}u.hide()};return(o,l)=>{const b=w;return d(),i("div",W,[Y(b,null,{header:h(()=>[a(t).user.value?(d(),i("div",q,"Your Profile")):(d(),i(E,{key:0},[R,$],64))]),default:h(()=>[e("div",D,[e("div",F,[I,e("div",M,[e("input",{type:"text",class:"w-full border-2 border-white/10 rounded-lg px-4 py-2 bg-transparent text-white read-only:bg-slate-800",placeholder:"Your Wallet Address",readonly:"",value:a(t).wallet.value},null,8,S)])]),e("div",j,[G,e("div",O,[e("input",{type:"text",class:"w-full border-2 border-white/10 rounded-lg px-4 py-2 bg-transparent text-white read-only:bg-slate-800",placeholder:"Your Wallet Address",readonly:"",value:a(m)},null,8,Q),T])]),e("div",z,[H,e("div",J,[n(e("input",{type:"text",class:"w-full border-2 border-white/10 rounded-lg px-4 py-2 bg-transparent text-white read-only:bg-slate-800",placeholder:"Your Name","onUpdate:modelValue":l[0]||(l[0]=r=>a(s).name=r)},null,512),[[c,a(s).name]])])]),e("div",K,[X,e("div",Z,[n(e("input",{type:"email",class:"w-full border-2 border-white/10 rounded-lg px-4 py-2 bg-transparent text-white read-only:bg-slate-800",placeholder:"Your Email","onUpdate:modelValue":l[1]||(l[1]=r=>a(s).email=r)},null,512),[[c,a(s).email]])])]),e("div",ee,[te,e("div",se,[e("div",ae,[e("img",{src:a(s).image,class:"w-16 h-16 inline-block"},null,8,oe)]),e("div",le,[n(e("input",{type:"text",class:"w-full border-2 border-white/10 rounded-lg px-4 py-2 bg-transparent text-white read-only:bg-slate-800",placeholder:"Your Avatar URL","onUpdate:modelValue":l[2]||(l[2]=r=>a(s).image=r)},null,512),[[c,a(s).image]])])])]),e("div",re,[a(t).isConnected.value&&!a(t).isLogged.value?(d(),i("button",{key:0,class:"bg-primary-500 rounded-lg px-4 py-2 text-white font-bold",onClick:v}," Create Profile ")):(d(),i("button",de," Update Profile (coming soon) "))])])]),_:1})])}}});export{pe as default};
